<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="content">

<div class="p-8 space-y-6">

    <!-- Header -->
    <div class="flex justify-between items-center">
        <div>
            <h1 class="text-3xl font-bold text-slate-900">Module Management</h1>
            <p class="text-slate-600">Create, edit and manage learning modules</p>
        </div>

        <a th:href="@{/learning/manage/modules/create}"
           class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
            + New Module
        </a>
    </div>

    <!-- Module List -->
    <div class="space-y-4">
        <div th:each="module : ${modules}"
             class="border rounded-lg p-6 bg-white shadow-sm space-y-6">

            <!-- Module Header -->
            <div class="flex justify-between items-center">
                <div>
                    <h2 class="text-xl font-semibold" th:text="${module.title}"></h2>
                    <p class="text-slate-500" th:text="${module.description}"></p>
                </div>

                <div class="flex gap-2">
                    <a th:href="@{/learning/manage/modules/edit/{id}(id=${module.id})}"
                       class="px-3 py-1 border rounded hover:bg-slate-100">
                        Edit
                    </a>

                    <form th:action="@{/learning/manage/modules/delete/{id}(id=${module.id})}"
                          method="post"
                          onsubmit="return confirm('Delete this module?')">
                        <button class="px-3 py-1 border border-red-500 text-red-600 rounded hover:bg-red-50">
                            Delete
                        </button>
                    </form>
                </div>
            </div>

            <!-- Lessons -->
            <div>
                <h3 class="font-semibold mb-2">Lessons</h3>

                <ul class="space-y-2 ml-4">
                    <li th:each="lesson : ${module.lessons}"
                        class="flex justify-between items-center border-b pb-1">

                        <span th:text="${lesson.title}"></span>

                        <div class="flex gap-3">
                            <a th:href="@{/learning/manage/lessons/edit/{id}(id=${lesson.id})}"
                               class="text-sm text-blue-600 hover:underline">
                                Edit
                            </a>

                            <form th:action="@{/learning/manage/lessons/delete/{id}(id=${lesson.id})}"
                                  method="post"
                                  onsubmit="return confirm('Delete this lesson?')">
                                <button class="text-sm text-red-600 hover:underline">
                                    Delete
                                </button>
                            </form>
                        </div>
                    </li>
                </ul>

                <a th:href="@{/learning/manage/lessons/create(moduleId=${module.id})}"
                   class="inline-block mt-2 text-blue-600 hover:underline">
                    + Add Lesson
                </a>
            </div>

            <!-- Quizzes -->
            <div>
                <h3 class="font-semibold mb-2">Quiz Questions</h3>

                <ul class="space-y-2 ml-4">
                    <li th:each="quiz : ${module.quizzes}"
                        class="flex justify-between items-center border-b pb-1">

                        <span th:text="${quiz.question}"></span>

                        <div class="flex gap-3">
                            <a th:href="@{/learning/manage/quizzes/edit/{id}(id=${quiz.id})}"
                               class="text-sm text-blue-600 hover:underline">
                                Edit
                            </a>

                            <form th:action="@{/learning/manage/quizzes/delete/{id}(id=${quiz.id})}"
                                  method="post"
                                  onsubmit="return confirm('Delete this quiz question?')">
                                <button class="text-sm text-red-600 hover:underline">
                                    Delete
                                </button>
                            </form>
                        </div>
                    </li>
                </ul>

                <a th:href="@{/learning/manage/quizzes/create(moduleId=${module.id})}"
                   class="inline-block mt-2 text-blue-600 hover:underline">
                    + Add Quiz Question
                </a>
            </div>

        </div>
    </div>

</div>

</th:block>
</html>
