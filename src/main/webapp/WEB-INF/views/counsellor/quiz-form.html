<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="content">

<div class="p-8 max-w-3xl mx-auto">

    <h1 class="text-2xl font-bold mb-6"
        th:text="${quiz.id == null ? 'Add Quiz Question' : 'Edit Quiz Question'}">
    </h1>

    <form th:action="@{/learning/manage/quizzes/save}"
          th:object="${quiz}"
          method="post"
          class="space-y-6">

        <!-- ðŸ”‘ REQUIRED FOR EDIT -->
        <input type="hidden" th:field="*{id}">

        <!-- REQUIRED TO KEEP MODULE -->
        <input type="hidden" name="moduleId" th:value="${moduleId}" />

        <!-- QUESTION -->
        <div>
            <label class="block font-medium mb-1">Question</label>
            <input th:field="*{question}"
                   class="w-full border rounded px-3 py-2"
                   required />
        </div>

        <!-- OPTIONS -->
        <div class="space-y-3">
            <label class="block font-medium">Options</label>

            <div th:each="i : ${#numbers.sequence(0,3)}" class="flex gap-3 items-center">
                <input type="text"
                       name="optionTexts"
                       th:value="${quiz.options.size() > i ? quiz.options[i] : ''}"
                       class="w-full border rounded px-3 py-2"
                       placeholder="Option [[${i + 1}]]"
                       required />

                <input type="radio"
                       th:field="*{correctAnswer}"
                       th:value="${i}"
                       required />
                <span>Correct</span>
            </div>
        </div>

        <!-- ACTIONS -->
        <div class="flex gap-4">
            <button type="submit"
                    class="px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                Save Question
            </button>

            <a th:href="@{/learning/manage/modules}"
               class="px-6 py-2 border rounded hover:bg-slate-100">
                Cancel
            </a>
        </div>

    </form>

</div>

</th:block>
</html>
